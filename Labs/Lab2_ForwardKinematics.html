

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>üî¨ Lab2: Forward Kinematics &#8212; Advanced Robotics</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script src="../_static/tabs.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Labs/Lab2_ForwardKinematics';</script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="üî¨ Project1: Inverse Kinematics" href="P1_InverseKinematics.html" />
    <link rel="prev" title="‚ùÑÔ∏è ICE5: Robotics Toolbox" href="ICE5_RoboticsToolbox.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/ece487.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/ece487.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    ECE 487 Advanced Robotics
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Course Info</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../syllabus.html">üìå Syllabus</a></li>
<li class="toctree-l1"><a class="reference internal" href="../schedule.html">üìÜ Course Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../resources.html">üíé Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python.html">üêç Python Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../robots.html">ü§ñ Robots, Robots, and Robots</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Labs</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="SoftwareConfiguration.html">‚úîÔ∏è Preflight: Software Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="ICE1_PythonIntro.html">‚ùÑÔ∏è ICE1: Introduction to Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="ICE2_PythonContainers.html">‚ùÑÔ∏è ICE2: Containers &amp; Numpy</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lab1_ExtractingEulerAngles.html">üî¨ Lab1: Extracting Euler Angles</a></li>
<li class="toctree-l1"><a class="reference internal" href="ICE3_OOP.html">‚ùÑÔ∏è ICE3: Classes and Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="ICE4_SpatialMath.html">‚ùÑÔ∏è ICE4: Spatial Math for Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="ICE5_RoboticsToolbox.html">‚ùÑÔ∏è ICE5: Robotics Toolbox</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">üî¨ Lab2: Forward Kinematics</a></li>
<li class="toctree-l1"><a class="reference internal" href="P1_InverseKinematics.html">üî¨ Project1: Inverse Kinematics</a></li>
<li class="toctree-l1"><a class="reference internal" href="ICE6_LSE.html">‚ùÑÔ∏è ICE6: Least Squares</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lab3_CameraCalibration.html">‚ùÑÔ∏è Lab3: Camera Calibration</a></li>
<li class="toctree-l1"><a class="reference internal" href="P2_VisionBasedManipulator.html">üî¨ Project2: Vision-Based Control</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Supplementary</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="NoPointer.html">üêç No Pointer in Python?</a></li>
<li class="toctree-l1"><a class="reference internal" href="Extra.html">Supplimentary</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/stanbaek/ece487" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/stanbaek/ece487/issues/new?title=Issue%20on%20page%20%2FLabs/Lab2_ForwardKinematics.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/Labs/Lab2_ForwardKinematics.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>üî¨ Lab2: Forward Kinematics</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#objectives">Objectives</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#procedure">üíª Procedure</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#danavit-hartenberg-of-5-dof-robotic-arm">Danavit-Hartenberg of 5 DoF robotic arm</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#usb-to-serial-connection">USB to Serial Connection</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#python-simulation-for-rothe-botic-arm">Python simulation for rothe botic arm</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#physical-implementation-of-forward-kinematics-for-robotic-arm">Physical Implementation of Forward Kinematics for Robotic Arm</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="lab2-forward-kinematics">
<h1>üî¨ Lab2: Forward Kinematics<a class="headerlink" href="#lab2-forward-kinematics" title="Permalink to this heading">#</a></h1>
<section id="objectives">
<h2>Objectives<a class="headerlink" href="#objectives" title="Permalink to this heading">#</a></h2>
<p>The purpose of this lab is to compare the theoretical solutions to the forward kinematics problem with a physical implementation on the 5 Dof robotic arm shown below.</p>
<a class="reference internal image-reference" href="../_images/xArm.jpg"><img alt="../_images/xArm.jpg" class="align-center" src="../_images/xArm.jpg" style="width: 350px;" /></a>
<p>In this lab, you will</p>
<ul class="simple">
<li><p>Parameterize the robotic arm following the Denavit-Hartenberg (DH) convention.</p></li>
<li><p>Use Python to compute the forward kinematic equations for the robot.</p></li>
<li><p>Write a Python script that moves the robot to the configurations specified by the user.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>First, solve the problem. Then, write the code. ‚Äì John Johnson</p>
</div>
</section>
<section id="procedure">
<h2>üíª Procedure<a class="headerlink" href="#procedure" title="Permalink to this heading">#</a></h2>
</section>
<section id="danavit-hartenberg-of-5-dof-robotic-arm">
<h2>Danavit-Hartenberg of 5 DoF robotic arm<a class="headerlink" href="#danavit-hartenberg-of-5-dof-robotic-arm" title="Permalink to this heading">#</a></h2>
<p>This is part of ICE5. Use the schematic diagram shown below to find the DH table of the robotic manipulator.</p>
<a class="reference internal image-reference" href="../_images/xArm.png"><img alt="../_images/xArm.png" class="align-center" src="../_images/xArm.png" style="width: 450px;" /></a>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Before starting this lab, check the solution to the DH table posted in Gradescope to ensure you have the correct answer. If the solution is not published in Gradescope, go through your table with the instructor.</p>
</div>
<section id="usb-to-serial-connection">
<h3>USB to Serial Connection<a class="headerlink" href="#usb-to-serial-connection" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>Connect the provided USB cable to your computer.</p></li>
<li><p>Connect the UART port to the robot controller board shown in the figure below.</p></li>
<li><p>Note that the red wire (5 Vcc) is not connected to the board.</p></li>
</ul>
<a class="reference internal image-reference" href="../_images/USB-UART_connection.jpg"><img alt="../_images/USB-UART_connection.jpg" class="align-center" src="../_images/USB-UART_connection.jpg" style="width: 400px;" /></a>
</section>
<section id="python-simulation-for-rothe-botic-arm">
<h3>Python simulation for rothe botic arm<a class="headerlink" href="#python-simulation-for-rothe-botic-arm" title="Permalink to this heading">#</a></h3>
<p>Download <a class="reference external" href="http://xArm.py">xArm.py</a> from Teams and complete the constructor of XArm, which is a subclass of <a class="reference external" href="https://petercorke.github.io/robotics-toolbox-python/intro.html#denavit-hartenberg-parameters">DHRobot</a>.  You need to use your DH table to create a <code class="docutils literal notranslate"><span class="pre">DHRobot</span></code> object.  Since XArm is a subclass of <code class="docutils literal notranslate"><span class="pre">DHRobot</span></code>, you can use all the methods and properties defined in <code class="docutils literal notranslate"><span class="pre">DHRobot</span></code>, such as the <code class="docutils literal notranslate"><span class="pre">fkine</span></code> method.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">simulation_only</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">B0</span> <span class="o">=</span> <span class="mf">0.090</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">L1</span> <span class="o">=</span> <span class="mf">0.000</span>     <span class="c1"># self.L1 = 0.010 for inverse kinematics</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">L2</span> <span class="o">=</span> <span class="mf">0.105</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">L3</span> <span class="o">=</span> <span class="mf">0.088</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">L4</span> <span class="o">=</span> <span class="mf">0.170</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">ordered_joints</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;base&#39;</span><span class="p">,</span> <span class="s1">&#39;shoulder&#39;</span><span class="p">,</span> <span class="s1">&#39;elbow&#39;</span><span class="p">,</span> <span class="s1">&#39;wpitch&#39;</span><span class="p">,</span> <span class="s1">&#39;wroll&#39;</span><span class="p">)</span>

    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
        <span class="p">[</span><span class="n">rbt</span><span class="o">.</span><span class="n">RevoluteMDH</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">B0</span><span class="p">),</span>
<span class="w">         </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">         write your code here</span>
<span class="sd">         &quot;&quot;&quot;</span>
         <span class="p">],</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;xArm&quot;</span>
    <span class="p">)</span>
</pre></div>
</div>
<p>Find the forward kinematics and generate plots for the following configurations in <a class="reference external" href="http://xArm.py">xArm.py</a></p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_forward_kinematics</span><span class="p">():</span>
    <span class="n">robot</span> <span class="o">=</span> <span class="n">XArm</span><span class="p">(</span><span class="n">simulation_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">q</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="n">q</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>  <span class="c1"># rest position</span>
    <span class="n">q</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>     <span class="c1"># zero position</span>
    <span class="n">q</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
    <span class="n">q</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
    <span class="n">q</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
    <span class="n">q</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
    <span class="n">q</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">])</span>
    <span class="n">q</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">])</span>
    <span class="n">q</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="o">-</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">])</span>
    <span class="n">q</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">])</span>
    
    <span class="k">for</span> <span class="n">angles</span> <span class="ow">in</span> <span class="n">q</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Write your code to find the forward kinematics and generate plots.</span>
<span class="sd">        Hints:</span>
<span class="sd">        - robot is an instance of XArm, which is a subclass of DHRobot. So you can use fkine.</span>
<span class="sd">        - use printline to print pose and angle. In Python Console, try</span>
<span class="sd">             from spatialmath import SE3</span>
<span class="sd">             help(SE3.printline)</span>
<span class="sd">          to get help on the printline function.</span>
<span class="sd">          </span>
<span class="sd">        Angles must be reported in degrees, not radians.</span>
<span class="sd">        &quot;&quot;&quot;</span>
</pre></div>
</div>
<p><strong>Deliverable 1</strong>: Submit the pose (position and orientation) of the tooltip for each configuration. You don‚Äôt have to submit the figures, but they will help verify your results. The angles must be in degrees.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>Always set the robot to the upright position as shown below before you send the first command to the robot.</p>
</div>
<a class="reference internal image-reference" href="../_images/xArm_Upright.png"><img alt="../_images/xArm_Upright.png" class="align-center" src="../_images/xArm_Upright.png" style="width: 400px;" /></a>
</section>
<section id="physical-implementation-of-forward-kinematics-for-robotic-arm">
<h3>Physical Implementation of Forward Kinematics for Robotic Arm<a class="headerlink" href="#physical-implementation-of-forward-kinematics-for-robotic-arm" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>Carefully read the following functions inside <a class="reference external" href="http://xArm.py">xArm.py</a>.</p></li>
<li><p>You don‚Äôt have to know how the following functions work, but you need to know what they do.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">get_servo_command()</span></code>:</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">servo_angles_to_positions()</span></code>:</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">send_command()</span></code></p></li>
</ul>
</li>
<li><p>You should know how the following functions work and what they do.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">joint_to_servo_angles()</span></code>:</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">move_joints()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">move_to_initial_pose()</span></code></p></li>
</ul>
</li>
</ul>
<p>Comment out <code class="docutils literal notranslate"><span class="pre">test_forward_kinematics()</span> </code> inside <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">__name__</span> <span class="pre">==</span> <span class="pre">'__main__':</span></code>, which is located at the end of the code, and
uncomment the next line.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    
    <span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>
        
    <span class="c1"># test_forward_kinematics()     &lt;--  COMMENT OUT</span>
    <span class="n">test_servo_position_command</span><span class="p">()</span>   <span class="o">&lt;--</span>  <span class="n">UNCOMMENT</span>
    <span class="c1"># test_servo_angle_command()</span>
    <span class="c1"># test_move_joints()</span>
</pre></div>
</div>
<p>Carefully look at the joint angles for the corresponding servo positions.</p>
<p>Comment out the first two test functions and uncomment the third line.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span>    <span class="c1"># test_forward_kinematics()       &lt;--  COMMENT OUT</span>
    <span class="c1"># test_servo_position_command()   &lt;--  COMMENT OUT</span>
    <span class="n">test_servo_angle_command</span><span class="p">()</span>        <span class="o">&lt;--</span>  <span class="n">UNCOMMENT</span>
    <span class="c1"># test_move_joints()</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Read <code class="docutils literal notranslate"><span class="pre">def</span> <span class="pre">test_servo_angle_command():</span></code> and complete the rest of the function.  Run the Python script to find the mathematical relationship between the servo angles (<span class="math notranslate nohighlight">\(\alpha_i\)</span>) and the joint angles (<span class="math notranslate nohighlight">\(\theta_i\)</span>). For example, <span class="math notranslate nohighlight">\(\alpha_2 = -\theta_2 + \pi/2\)</span> because when <span class="math notranslate nohighlight">\(\theta_2 = 0\)</span>, <span class="math notranslate nohighlight">\(\alpha_2 = 90^\circ\)</span> and when <span class="math notranslate nohighlight">\(\theta_2 = 90\)</span>, <span class="math notranslate nohighlight">\(\alpha_2 = 0^\circ\)</span>,</p></li>
</ul>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>You may want to put breakpoints in the code and execute one line at a time to observe the joint angles of the robot.</p>
</div>
<p><strong>Deliverable 2</strong>: For each joint, report the mathematical equation for <span class="math notranslate nohighlight">\(\alpha_i\)</span> in terms of <span class="math notranslate nohighlight">\(\theta_i\)</span>, where <span class="math notranslate nohighlight">\(i\in \{1,2,3,4,5\}\)</span> is the joint index. Write the five equations on paper and submit it in Gradescope. You don‚Äôt have to impletement the equations in Python.</p>
<p>Comment out the first three test functions and uncomment the last line.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="c1"># test_forward_kinematics()         &lt;--  COMMENT OUT</span>
    <span class="c1"># test_servo_position_command()   &lt;--  COMMENT OUT</span>
    <span class="c1"># test_servo_angle_command()      &lt;--  COMMENT OUT</span>
    <span class="n">test_move_joints</span><span class="p">()</span>                <span class="o">&lt;--</span>  <span class="n">UNCOMMENT</span>
</pre></div>
</div>
<p>Use the results from Deliverable 2 to update the following two lines of code inside the constructor, <code class="docutils literal notranslate"> <span class="pre">def</span> <span class="pre">__init__(self,</span> <span class="pre">simulation_only=False):</span></code></p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span>    <span class="c1"># alpha = direction * theta + offset</span>
    <span class="c1"># where alpha is the servo angle and theta is the joint angle.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">joint_servo_offset</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">joint_servo_direction</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>Read <code class="docutils literal notranslate"><span class="pre">def</span> <span class="pre">test_move_joints():</span></code> and complete the rest of the function.</p>
<p><strong>Deliverable 3</strong>: Demo your robot moving the joints as described in the function.</p>
<p>Go to <code class="docutils literal notranslate"><span class="pre">def</span> <span class="pre">test_forward_kinematics():</span></code> and replace <code class="docutils literal notranslate"><span class="pre">True</span></code> with <code class="docutils literal notranslate"><span class="pre">False</span></code> in the following line.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span>   <span class="n">robot</span> <span class="o">=</span> <span class="n">XArm</span><span class="p">(</span><span class="n">simulation_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="o">&lt;--</span> <span class="n">change</span> <span class="n">it</span> <span class="n">to</span> <span class="kc">False</span>
</pre></div>
</div>
<p>Uncomment the first test function inside <strong>name</strong> == ‚Äò<strong>main</strong>‚Äô: and comment out the rest.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">test_forward_kinematics</span><span class="p">()</span>         <span class="o">&lt;--</span>  <span class="n">UNCOMMENT</span>
    <span class="c1"># test_servo_position_command()   &lt;--  COMMENT OUT</span>
    <span class="c1"># test_servo_angle_command()      &lt;--  COMMENT OUT</span>
    <span class="c1"># test_move_joints()              &lt;--  COMMENT OUT</span>
</pre></div>
</div>
<p>You need to add the <code class="docutils literal notranslate"><span class="pre">move_joints</span></code> function inside <code class="docutils literal notranslate"><span class="pre">test_forward_kinematics</span></code>.  Execute the code and use a ruler to measure the position of the tooltip. Compare the measured values with the calculated values.</p>
<p><strong>Deliverable 4</strong>: Demo your robot moving the tooltip to the calculated position.</p>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./Labs"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="ICE5_RoboticsToolbox.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">‚ùÑÔ∏è ICE5: Robotics Toolbox</p>
      </div>
    </a>
    <a class="right-next"
       href="P1_InverseKinematics.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">üî¨ Project1: Inverse Kinematics</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#objectives">Objectives</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#procedure">üíª Procedure</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#danavit-hartenberg-of-5-dof-robotic-arm">Danavit-Hartenberg of 5 DoF robotic arm</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#usb-to-serial-connection">USB to Serial Connection</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#python-simulation-for-rothe-botic-arm">Python simulation for rothe botic arm</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#physical-implementation-of-forward-kinematics-for-robotic-arm">Physical Implementation of Forward Kinematics for Robotic Arm</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Stan Baek
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      ¬© Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>