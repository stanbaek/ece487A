
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>üî¨ Lab2: Forward Kinematics &#8212; Fundamentals of Robotics</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/tabs.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="üö© P1: Inverse Kinematics" href="P1_InverseKinematics.html" />
    <link rel="prev" title="‚ùÑÔ∏è ICE5: Robotics Toolbox" href="ICE5_RoboticsToolbox.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/ece487.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Fundamentals of Robotics</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../intro.html">
   ECE 487 Fundamentals of Robotics
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Course Info
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../syllabus.html">
   üìå Syllabus
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../schedule.html">
   üìÜ Course Schedule
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../resources.html">
   üíé Resources
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../python.html">
   üêç Python Tutorials
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../robots.html">
   ü§ñ Robots, Robots, and Robots
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Labs
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="SoftwareConfiguration.html">
   ‚úîÔ∏è Preflight: Software Setup
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="ICE1_PythonIntro.html">
   ‚ùÑÔ∏è ICE1: Introduction to Python
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="ICE2_PythonContainers.html">
   ‚ùÑÔ∏è ICE2: Containers &amp; Numpy
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Lab1_ExtractingEulerAngles.html">
   üî¨ Lab1: Extracting Euler Angles
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="ICE3_OOP.html">
   ‚ùÑÔ∏è ICE3: Classes and Objects
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="ICE4_SpatialMath.html">
   ‚ùÑÔ∏è ICE4: Spatial Math for Python
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="ICE5_RoboticsToolbox.html">
   ‚ùÑÔ∏è ICE5: Robotics Toolbox
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   üî¨ Lab2: Forward Kinematics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="P1_InverseKinematics.html">
   üö© P1: Inverse Kinematics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="ICE6_LSE.html">
   ‚ùÑÔ∏è ICE6: Least Squares
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="P2_VisionBasedManipulator.html">
   üö© P2: Robot with Computer Vision
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Supplementary
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="NoPointer.html">
   üêç No Pointer in Python?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Extra.html">
   Supplimentary
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/Labs/Lab2_ForwardKinematics.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/stanbaek/ece487"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/stanbaek/ece487/issues/new?title=Issue%20on%20page%20%2FLabs/Lab2_ForwardKinematics.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#objectives">
   Objectives
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#procedure">
   üíª Procedure
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#danavit-hartenberg-of-5-dof-robotic-arm">
   Danavit-Hartenberg of 5 DoF robotic arm
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#usb-to-serial-connection">
     USB to Serial Connection
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#python-simulation-for-rothe-botic-arm">
     Python simulation for rothe botic arm
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#physical-implementation-of-forward-kinematics-for-robotic-arm">
     Physical Implementation of Forward Kinematics for Robotic Arm
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>üî¨ Lab2: Forward Kinematics</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#objectives">
   Objectives
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#procedure">
   üíª Procedure
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#danavit-hartenberg-of-5-dof-robotic-arm">
   Danavit-Hartenberg of 5 DoF robotic arm
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#usb-to-serial-connection">
     USB to Serial Connection
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#python-simulation-for-rothe-botic-arm">
     Python simulation for rothe botic arm
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#physical-implementation-of-forward-kinematics-for-robotic-arm">
     Physical Implementation of Forward Kinematics for Robotic Arm
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="lab2-forward-kinematics">
<h1>üî¨ Lab2: Forward Kinematics<a class="headerlink" href="#lab2-forward-kinematics" title="Permalink to this headline">¬∂</a></h1>
<div class="section" id="objectives">
<h2>Objectives<a class="headerlink" href="#objectives" title="Permalink to this headline">¬∂</a></h2>
<p>The purpose of this lab is to compare the theoretical solutions to the forward kinematics problem with a physical implementation on the 5 Dof robotic arm shown below.</p>
<a class="reference internal image-reference" href="../_images/xArm.jpg"><img alt="../_images/xArm.jpg" class="align-center" src="../_images/xArm.jpg" style="width: 350px;" /></a>
<p>In this lab, you will</p>
<ul class="simple">
<li><p>Parameterize the robotic arm following the Denavit-Hartenberg (DH) convention.</p></li>
<li><p>Use Python to compute the forward kinematic equations for the robot.</p></li>
<li><p>Write a Python script that moves the robot to the configurations specified by the user.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>First, solve the problem. Then, write the code. ‚Äì John Johnson</p>
</div>
</div>
<div class="section" id="procedure">
<h2>üíª Procedure<a class="headerlink" href="#procedure" title="Permalink to this headline">¬∂</a></h2>
</div>
<div class="section" id="danavit-hartenberg-of-5-dof-robotic-arm">
<h2>Danavit-Hartenberg of 5 DoF robotic arm<a class="headerlink" href="#danavit-hartenberg-of-5-dof-robotic-arm" title="Permalink to this headline">¬∂</a></h2>
<p>This is part of ICE5. Use the schematic diagram shown below to find the DH table of the robotic manipulator.</p>
<a class="reference internal image-reference" href="../_images/xArm.png"><img alt="../_images/xArm.png" class="align-center" src="../_images/xArm.png" style="width: 450px;" /></a>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Before starting this lab, check the solution to the DH table posted in Gradescope to ensure you have the correct answer. If the solution is not published in Gradescope, go through your table with the instructor.</p>
</div>
<div class="section" id="usb-to-serial-connection">
<h3>USB to Serial Connection<a class="headerlink" href="#usb-to-serial-connection" title="Permalink to this headline">¬∂</a></h3>
<ul class="simple">
<li><p>Connect the provided USB cable to your computer.</p></li>
<li><p>Connect the UART port to the robot controller board shown in the figure below.</p></li>
<li><p>Note that the red wire (5 Vcc) is not connected to the board.</p></li>
</ul>
<a class="reference internal image-reference" href="../_images/USB-UART_connection.jpg"><img alt="../_images/USB-UART_connection.jpg" class="align-center" src="../_images/USB-UART_connection.jpg" style="width: 400px;" /></a>
</div>
<div class="section" id="python-simulation-for-rothe-botic-arm">
<h3>Python simulation for rothe botic arm<a class="headerlink" href="#python-simulation-for-rothe-botic-arm" title="Permalink to this headline">¬∂</a></h3>
<p>Download <a class="reference external" href="http://xArm.py">xArm.py</a> from Teams and complete the constructor of XArm, which is a subclass of <a class="reference external" href="https://petercorke.github.io/robotics-toolbox-python/intro.html#denavit-hartenberg-parameters">DHRobot</a>.  You need to use your DH table to create a <code class="docutils literal notranslate"><span class="pre">DHRobot</span></code> object.  Since XArm is a subclass of <code class="docutils literal notranslate"><span class="pre">DHRobot</span></code>, you can use all the methods and properties defined in <code class="docutils literal notranslate"><span class="pre">DHRobot</span></code>, such as the <code class="docutils literal notranslate"><span class="pre">fkine</span></code> method.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">simulation_only</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">B0</span> <span class="o">=</span> <span class="mf">0.090</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">L1</span> <span class="o">=</span> <span class="mf">0.000</span>     <span class="c1"># self.L1 = 0.010 for inverse kinematics</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">L2</span> <span class="o">=</span> <span class="mf">0.105</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">L3</span> <span class="o">=</span> <span class="mf">0.088</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">L4</span> <span class="o">=</span> <span class="mf">0.170</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">ordered_joints</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;base&#39;</span><span class="p">,</span> <span class="s1">&#39;shoulder&#39;</span><span class="p">,</span> <span class="s1">&#39;elbow&#39;</span><span class="p">,</span> <span class="s1">&#39;wpitch&#39;</span><span class="p">,</span> <span class="s1">&#39;wroll&#39;</span><span class="p">)</span>

    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
        <span class="p">[</span><span class="n">rbt</span><span class="o">.</span><span class="n">RevoluteMDH</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">B0</span><span class="p">),</span>
         <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">         write your code here</span>
<span class="sd">         &quot;&quot;&quot;</span>
         <span class="p">],</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;xArm&quot;</span>
    <span class="p">)</span>
</pre></div>
</div>
<p>Find the forward kinematics and generate plots for the following configurations in <a class="reference external" href="http://xArm.py">xArm.py</a></p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_forward_kinematics</span><span class="p">():</span>
    <span class="n">robot</span> <span class="o">=</span> <span class="n">XArm</span><span class="p">(</span><span class="n">simulation_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">q</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="n">q</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>  <span class="c1"># rest position</span>
    <span class="n">q</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>     <span class="c1"># zero position</span>
    <span class="n">q</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
    <span class="n">q</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
    <span class="n">q</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
    <span class="n">q</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
    <span class="n">q</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">])</span>
    <span class="n">q</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">])</span>
    <span class="n">q</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="o">-</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">])</span>
    <span class="n">q</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">])</span>
    
    <span class="k">for</span> <span class="n">angles</span> <span class="ow">in</span> <span class="n">q</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Write your code to find the forward kinematics and generate plots.</span>
<span class="sd">        Hints:</span>
<span class="sd">        - robot is an instance of XArm, which is a subclass of DHRobot. So you can use fkine.</span>
<span class="sd">        - use printline to print pose and angle. In Python Console, try</span>
<span class="sd">             from spatialmath import SE3</span>
<span class="sd">             help(SE3.printline)</span>
<span class="sd">          to get help on the printline function.</span>
<span class="sd">          </span>
<span class="sd">        Angles must be reported in degrees, not radians.</span>
<span class="sd">        &quot;&quot;&quot;</span>
</pre></div>
</div>
<p><strong>Deliverable 1</strong>: Submit the pose (position and orientation) of the tooltip for each configuration. You don‚Äôt have to submit the figures, but they will help verify your results. The angles must be in degrees.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>Always set the robot to the upright position as shown below before you send the first command to the robot.</p>
</div>
<a class="reference internal image-reference" href="../_images/xArm_Upright.png"><img alt="../_images/xArm_Upright.png" class="align-center" src="../_images/xArm_Upright.png" style="width: 400px;" /></a>
</div>
<div class="section" id="physical-implementation-of-forward-kinematics-for-robotic-arm">
<h3>Physical Implementation of Forward Kinematics for Robotic Arm<a class="headerlink" href="#physical-implementation-of-forward-kinematics-for-robotic-arm" title="Permalink to this headline">¬∂</a></h3>
<ul class="simple">
<li><p>Carefully read the following functions inside <a class="reference external" href="http://xArm.py">xArm.py</a>.</p></li>
<li><p>You don‚Äôt have to know how the following functions work, but you need to know what they do.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">get_servo_command()</span></code>:</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">servo_angles_to_positions()</span></code>:</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">send_command()</span></code></p></li>
</ul>
</li>
<li><p>You should know how the following functions work and what they do.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">joint_to_servo_angles()</span></code>:</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">move_joints()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">move_to_initial_pose()</span></code></p></li>
</ul>
</li>
</ul>
<p>Comment out <code class="docutils literal notranslate"><span class="pre">test_forward_kinematics()</span> </code> inside <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">__name__</span> <span class="pre">==</span> <span class="pre">'__main__':</span></code>, which is located at the end of the code, and
uncomment the next line.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    
    <span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>
        
    <span class="c1"># test_forward_kinematics()     &lt;--  COMMENT OUT</span>
    <span class="n">test_servo_position_command</span><span class="p">()</span>   <span class="o">&lt;--</span>  <span class="n">UNCOMMENT</span>
    <span class="c1"># test_servo_angle_command()</span>
    <span class="c1"># test_move_joints()</span>
</pre></div>
</div>
<p>Carefully look at the joint angles for the corresponding servo positions.</p>
<p>Comment out the first two test functions and uncomment the third line.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span>    <span class="c1"># test_forward_kinematics()       &lt;--  COMMENT OUT</span>
    <span class="c1"># test_servo_position_command()   &lt;--  COMMENT OUT</span>
    <span class="n">test_servo_angle_command</span><span class="p">()</span>        <span class="o">&lt;--</span>  <span class="n">UNCOMMENT</span>
    <span class="c1"># test_move_joints()</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Read <code class="docutils literal notranslate"><span class="pre">def</span> <span class="pre">test_servo_angle_command():</span></code> and complete the rest of the function.  Run the Python script to find the mathematical relationship between the servo angles (<span class="math notranslate nohighlight">\(\alpha_i\)</span>) and the joint angles (<span class="math notranslate nohighlight">\(\theta_i\)</span>). For example, <span class="math notranslate nohighlight">\(\alpha_2 = -\theta_2 + \pi/2\)</span> because when <span class="math notranslate nohighlight">\(\theta_2 = 0\)</span>, <span class="math notranslate nohighlight">\(\alpha_2 = 90^\circ\)</span> and when <span class="math notranslate nohighlight">\(\theta_2 = 90\)</span>, <span class="math notranslate nohighlight">\(\alpha_2 = 0^\circ\)</span>,</p></li>
</ul>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>You may want to put breakpoints in the code and execute one line at a time to observe the joint angles of the robot.</p>
</div>
<p><strong>Deliverable 2</strong>: For each joint, report the mathematical equation for <span class="math notranslate nohighlight">\(\theta\)</span> in terms of <span class="math notranslate nohighlight">\(\alpha\)</span>.</p>
<p>Comment out the first three test functions and uncomment the last line.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="c1"># test_forward_kinematics()         &lt;--  COMMENT OUT</span>
    <span class="c1"># test_servo_position_command()   &lt;--  COMMENT OUT</span>
    <span class="c1"># test_servo_angle_command()      &lt;--  COMMENT OUT</span>
    <span class="n">test_move_joints</span><span class="p">()</span>                <span class="o">&lt;--</span>  <span class="n">UNCOMMENT</span>
</pre></div>
</div>
<p>Use the results from Deliverable 2 to update the following two lines of code inside the constructor, <code class="docutils literal notranslate"> <span class="pre">def</span> <span class="pre">__init__(self,</span> <span class="pre">simulation_only=False):</span></code></p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span>    <span class="c1"># alpha = direction * theta + offset</span>
    <span class="c1"># where alpha is the servo angle and theta is the joint angle.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">joint_servo_offset</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">joint_servo_direction</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>Read <code class="docutils literal notranslate"><span class="pre">def</span> <span class="pre">test_move_joints():</span></code> and complete the rest of the function.</p>
<p><strong>Deliverable 3</strong>: Demo your robot moving the joints as described in the function.</p>
<p>Go to <code class="docutils literal notranslate"><span class="pre">def</span> <span class="pre">test_forward_kinematics():</span></code> and replace <code class="docutils literal notranslate"><span class="pre">True</span></code> with <code class="docutils literal notranslate"><span class="pre">False</span></code> in the following line.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span>   <span class="n">robot</span> <span class="o">=</span> <span class="n">XArm</span><span class="p">(</span><span class="n">simulation_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="o">&lt;--</span> <span class="n">change</span> <span class="n">it</span> <span class="n">to</span> <span class="kc">False</span>
</pre></div>
</div>
<p>Uncomment the first test function inside <strong>name</strong> == ‚Äò<strong>main</strong>‚Äô: and comment out the rest.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">test_forward_kinematics</span><span class="p">()</span>         <span class="o">&lt;--</span>  <span class="n">UNCOMMENT</span>
    <span class="c1"># test_servo_position_command()   &lt;--  COMMENT OUT</span>
    <span class="c1"># test_servo_angle_command()      &lt;--  COMMENT OUT</span>
    <span class="c1"># test_move_joints()              &lt;--  COMMENT OUT</span>
</pre></div>
</div>
<p>Execute the code and use a ruler to measure the position of the tooltip. Compare the measured values with the calculated values.</p>
<p><strong>Deliverable 4</strong>: Demo your robot moving the tooltip to the calculated position.</p>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./Labs"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="ICE5_RoboticsToolbox.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">‚ùÑÔ∏è ICE5: Robotics Toolbox</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="P1_InverseKinematics.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">üö© P1: Inverse Kinematics</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Stan Baek<br/>
    
        &copy; Copyright 2022.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>